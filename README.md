# Hunt Logic
## ゲーム説明
- 1人称視点のシューティングゲーム（FPS)です。プレイヤーは、時間経過で減少する体力と、敵からの攻撃で減少するHPの２つを管理しながら、できる限り長く生き延びるサバイバル要素も含めています。
- 登場キャラクターはプレイヤーの他に、パートナーのキツネ、見つけると逃げるウサギ、攻撃してくるハチ、こちらから攻撃したら反撃してくる熊、がいます。
- https://unityroom.com/games/hiroakeen_fps_1
  こちらのUnityRoomでは生存時間によるランキングにも対応しています。
- https://hiroakeen.itch.io/hunt-logic
  こちらのitch.ioではWindowsダウンロード版も配信しています。

## 独自性（こだわり） 
- エネミーがプレイヤーに自動で近づく実装を応用して、パートナーのキツネが動物のもとへ案内してくれるナビゲーション機能へ改変した。
- 矢が正面へ飛ばない問題があった。Instantiate位置からCanvasをScreenSpace-Cameraに設定し、WorldToScreenPointやScreenPointToRayを使い、さらにDebug.DrawRayで目視確認しながら調整した。
- 弓をひく角度などリアルさが出やすいように調節、連射できない仕様やアニメーションを長めに設定した。
- それぞれの動物ごとに挙動を変化。熊のみBodyとHeadで与えるダメージ量が変化。
- マップを一定地点まで進むと反対側へ繋がり、無限に広がっているように見せることでマップ容量負荷を軽減。
- FogとCameraのClipping Planes Farを小さくし、視界をあえて狭めることで探索感を得られるようにした。
- ダメージによるマスク描画により緊迫感を上げた。
- プレイヤーの影（全身）とアニメーションが連動しているが、視界上の腕（腕のみ）とキャラクターの腕が被る問題があった。キャラクターモデルを影のみ描画（Cast Shadow）することで解決。

## プログラミング技術（機能・デザイン） 
- オブジェクト指向を取り入れ、各クラスを単一責任になるよう分離
- 攻撃Hitの実装を強制するためonHit()をインターフェイスで実装
- 動物たちの基底クラスをabstractとし、種別ごとに動作をoverrideできるようにしたため、今後追加する場合の拡張性も確保
- シングルトンによりExit処理、どのシーンでもエスケープで終了可。
- DoTweenでUIアニメーションを作成。
- 動物ごとのオーディオを３Dで設定し、プレイヤーとの距離により音量が変化。
- terrainによる樹木の自動配置、影の描画。
- オクルージョンカリングにより描画負荷を軽減。

## 制作経緯（開発スケジュール） 
- 初日：企画（FPS＋狩り、登場キャラクターは少なく、ナビゲーションあり、視界狭く、サバイバル要素）
  参考にしたゲーム
  - Apex（FPS、弓矢）
  - マインクラフト（サバイバル要素）
  - モンスターハンター（おともキャラ、狩り）
  - ゼルダの伝説（ナビゲーション機能）
  - CallOfDuty BlackOps（ダメージマスク描画）
- ２日目：基礎構成（プレイヤー、カメラ、ナビゲーションなどのスクリプト、アニメーション、アセットや素材集めなど）と、マップ作製
- ３日目：衝突判定、トリガー判定、ダメージ処理などの接続関係、矢の射出関係
- ４日目：オーディオ、テストプレイ、バグ修正
- ５日目：最終調整。UnityRoom（ランキング対応調整）やitch.ioに投稿
- ６日目以降：調整＆アップデートを継続
  
## 使用素材（アセット等を記載） 
- Game Weapon Icons Package
- Blood splatter decal package
- Ten Power-Ups
- Fantasy Bee
- White Rabbit
- FREE Stylized Bear - RPG Forest Animal
- LowPoly Survival Character Rio
- Toon Fox
- Arms&HandsHumanoidRig
- RPG_Animations - Bow
- Anime Natural Environment
- Simple Gems and Items Ultimate Animated Customizable Pack
- DOTween (HOTween v2)
- Sleek essential UI pack
- Free Meat and Skin Icons

## まとめ
- 初めて形になるまで作ることができた。ひととおりの流れを経験し、すべてを自分で調整することの大変さや、スケジュール管理も想定外のことばかりだった。
- 苦労した点：弓の位置や矢の発射方向の調整。どう書けば見やすいコードになるのか、Unity公式eBookなどを参考にしつつ形にしていった。
- 改善点：プロファイラーを活用して負荷の高いところを改善したい。より疎結合なスクリプト構成を目指したい。
- 抱負：アセットを購入するのではなく自作できたらいいなと思う。また、オブジェクト指向やデザインパターンをより効率よく、拡張性を高く維持できるよう訓練していきたい。

## 参考図書
- Unity公式eBook
- 作って学べる　Unity本格入門　［Unity 6対応版］賀好 昭仁 著
- Unityの教科書 Unity 6完全対応版 北村愛実 著
- Unityゲーム プログラミング・バイブル 2nd Generation 著者：森 哲哉、布留川 英一、西森 丈俊、車谷 勇人、一條 貴彰、打田 恭平、轟 昂、室星 亮太、井本 大登、細田 翔、西岡 陽、平井 佑樹、コポコポ、すいみん、Maruton、karukaru、ハダシA、notargs、EIKI`、おれんじりりぃ、黒河 優介、中村 優一、藤岡 裕吾
- Unity 3Dゲーム開発ではじめるC#プログラミング Harrison Ferrone　著/吉川 邦夫　訳
- 新・標準プログラマーズライブラリ なるほどなっとく C#入門 出井秀行　著
- 確かな力が身につく C#「超」入門 第3版 北村愛実 著
- 独習C# 第5版 山田 祥寛 著
- Game Programming Patterns ソフトウェア開発の問題解決メニュー Robert Nystrom　著/武舎 広幸　監修/阿部 和也　訳/上西 昌弘　訳
- オブジェクト設計スタイルガイド　Matthias Noback 著/田中 裕一 訳
